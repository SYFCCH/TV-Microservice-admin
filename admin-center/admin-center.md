# 1 登录 
步骤:  
* 1 拿到用户名和密码
* 2 通过spring的DigestUtils将密码转换成md5加密后的密码，到数据库查询   
* 3 如果有的话，则返回的是adminDB，即数据库中完整的真实用户信息，然后拿出来
从controller中获取到用户登录请求携带的token   


用session值作为Token

客户端：客户端只需携带用户名和密码登陆即可。

服务端：服务端接收到用户名和密码后并判断，如果正确了就将本地获取sessionID作为Token返回给客户端，客户端以后只需带上请求数据即可。

分析：这种方式使用的好处是方便，不用存储数据，但是缺点就是当session过期后，客户端必须重新登录才能进行访问数据


拿到token后存储到redis中，设置过期时间    

JWT和token(sessionId+redis)哪种方案更好用     
<https://www.zhihu.com/question/274566992?sort=created>

答案是：项目没有不用redis的，有了redis，还有你jwt啥事儿    

![img_1.png](img_1.png)     

![img_2.png](img_2.png)    
![img_3.png](img_3.png)        

* 4 如果失败（密码不匹配），那就抛出运行时异常


Spring的加密工具类---DigestUtils    

![img.png](img.png)   


Hash算法
Hash算法特别的地方在于它是一种单向算法，用户可以通过Hash算法对目标信息生成一段特定长度的唯一的Hash值，却不能通过这个Hash值重新获得目标信息。因此Hash算法常用在不可还原的密码存储、信息完整性校验等。

常见的Hash算法：MD2、MD4、MD5、HAVAL、SHA、SHA-1、HMAC、HMAC-MD5、HMAC-SHA1

加密算法的效能通常可以按照算法本身的复杂程度、密钥长度（密钥越长越安全）、加解密速度等来衡量。上述的算法中，除了DES密钥长度不够、MD2速度较慢已逐渐被淘汰外，其他算法仍在目前的加密系统产品中使用。



常用于对数据库进行密码加密的加密算法有以下几种    
1.MD5加密算法

MD5为计算机安全领域广泛使用的一种散列函数，用以提供消息的完整性保护，MD5是以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成—个128位散列值。

2.DES加密算法

DES加密算法是一种分组密码，以64位为分组对数据加密，它的密钥长度是56位，加密解密用同一算法。DES加密算法是对密钥进行保密，而公开算法，包括加密和解密算法。

3.RSA加密算法

RSA算法是一种使用不同的加密密钥与解密密钥，是由已知加密密钥推导出解密密钥在计算上是不可行的密码体制，其原理是根据数论，寻求两个大素数比较简单，而将它们的乘积进行因式分解却极其困难，因此可以将乘积公开作为加密密钥。   


### 减少json大小，提高网络速度   

有些接口只要这部分的json数据，就不要把其他的属性返回了，会降低网络速度   

前后端分离的情况下， 我们可以用一个对象来接收，这个对象叫作data transfer object，放在dto包下   
日后这个对象要在前后端之间进行数据传输


![img_4.png](img_4.png)   

AdminMsg就是Admin的网络传输对象  
![img_6.png](img_6.png)    
只有Admin里面的两个属性   

我们从redis查询出来的admin对象，可以用Spring的BeanUtils来进行属性复制,一样名字的属性就能自动复制过去     

@JsonProperty  
转换到Json里面的格式名  